<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>ContentOS</title>
    <!-- Tailwind via CDN Play (good enough for prototyping) -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      const host = window.location.hostname
      const isLocalHost =
        host === 'localhost' ||
        host === '127.0.0.1' ||
        host.endsWith('.local') ||
        host === ''

      const version =
        typeof __APP_VERSION__ !== 'undefined' && __APP_VERSION__ !== 'dev'
          ? __APP_VERSION__
          : ''
      const loadApp = () => import('/src/main.jsx')

      if (isLocalHost) {
        loadApp().catch((err) => {
          console.error('Failed to start Vite dev app:', err)
        })
      } else {
        loadApp().catch(() => {
          const suffix = version ? `?v=${encodeURIComponent(version)}` : ''
          window.location.replace(`./docs/${suffix}`)
        })
      }
    </script>
  </body>
</html>
